---
sidebar_position: 8
title: ^ AI组织知识与规则标准化
description: 了解Caret确保AI准确遵循团队规则和标准的核心系统。
---

# ^ AI组织知识与规则标准化

<BrandName />的设计使AI能够**准确理解并遵循团队的编码规则和标准**。通过这个系统，AI不仅是一个简单的代码生成工具，而是一个真正理解项目上下文的团队成员。

## 为什么知识同步很重要？

| 情况 | 通用AI工具 | <BrandName /> |
|---|---|---|
| **团队规则遵守** | 不知道规则 | ✅ 自动识别规则文件 |
| **项目上下文** | 每次都需要解释 | ✅ 持续记忆 |
| **代码一致性** | 每个工具风格不同 | ✅ 保持团队标准 |
| **角色优化** | 无 | ✅ AI/人类文档分离 |

## 核心概念1: 双目录架构

<BrandName />认识到**AI和人类阅读的文档目的不同**。为此，它使用两个目录：

```
your-project/
├── .agents/                    # AI用 (英语，token优化)
│   ├── context/               # 系统规则
│   │   ├── agents-rules.json  # 主规则文件 (SoT)
│   │   └── ai-work-index.yaml # 工作索引
│   ├── workflows/             # 任务工作流
│   │   └── atoms/             # 可重用构建块
│   ├── skills/                # AI技能
│   └── hooks/                 # 事件钩子
│
├── .users/                     # 人类用 (母语，详细)
│   ├── context/               # 项目上下文 (Markdown)
│   ├── workflows/             # 工作流指南
│   └── skills/                # 技能指南
│
└── AGENTS.md                   # AI入口点
```

### 为什么要分离？

| 类别 | `.agents/` (AI用) | `.users/` (人类用) |
|------|-------------------|-------------------|
| **语言** | 英语 (token效率) | 母语 |
| **格式** | JSON/YAML (结构化) | Markdown (可读性) |
| **目的** | 确保确定性行为 | 提供详细说明 |
| **对象** | AI代理 | 开发者/团队成员 |

**Token优化**: `.agents/`中的文件使用英语编写，用更少的token传达相同的含义。这样可以高效使用上下文窗口并降低成本。

## 核心概念2: Atomic Knowledge System

<BrandName />使用**Atomic Knowledge（知识原子化）**方式。不是使用单个庞大的文档，而是将知识分解为最小单位（Atom），并在需要时组合。

### 工作方式

1. **任务分析**: AI读取`ai-work-index.yaml`识别任务类型
2. **工作流加载**: 只读取相关任务的工作流文件
3. **知识原子组合**: 只加载工作流引用的atoms
4. **任务执行**: 使用组合的知识执行任务

### 示例

```
.agents/workflows/
├── code-review.md             # 代码审查工作流
├── feature-implementation.md  # 功能实现工作流
└── atoms/                     # 可重用构建块
    ├── tdd-cycle.md           # TDD循环
    ├── naming-conventions.md  # 命名规范
    └── document-changes.md    # 变更文档化
```

**优点**: AI不是始终加载所有规则，而是选择性地只加载当前任务所需的规则，**节省token**。

## 核心概念3: 规则位置与优先级

<BrandName />使用**`.agents/context/`**文件夹作为规则的单一来源。这确保AI在整个项目中遵循一致的标准。

### 规则位置

| 类型 | 位置 | 用途 |
|------|------|------|
| **工作区规则** | `.agents/context/` | 项目特定规则 |
| **目录范围** | `AGENTS.md` | 仅应用于特定文件夹 |
| **全局规则** | `Documents/Careti/Rules` | 应用于所有项目 |
| **工作流** | `.agents/workflows/` | 按需加载 |

### 为什么标准化很重要？

| 问题 | 解决方案 |
|------|------|
| 规则分散在多处 | 集中管理 |
| 规则冲突 | 明确优先级 |
| AI遗漏规则 | 保证自动加载 |

## 核心概念4: 跨组织知识同步

使用子模块，可以**在组织内的多个项目间共享规则和知识**。

### 组织仓库模式

```
org-context/                      # 组织共享仓库 (Git)
├── .agents/                      # AI上下文
│   ├── context/                  # 组织规则/策略
│   │   ├── conventions.md        # 开发规范
│   │   ├── tech-stack.md         # 技术栈
│   │   └── security-policy.md    # 安全策略
│   └── workflows/                # 工作流定义
│       ├── code-review.md
│       └── release-process.md
│
├── .users/                       # 用户文档 (镜像)
│   ├── context/
│   │   ├── 开发标准.md           # 详细指南
│   │   └── 技术栈.md
│   └── workflows/
│       └── 代码审查指南.md
│
└── AGENTS.md                     # 组织AI入口点
```

### 作为子模块连接

```bash
# 将组织上下文添加为子模块
git submodule add git@github.com:your-org/org-context.git
```

```
your-project/
├── .agents/                # 项目规则
├── .users/                 # 项目用户文档
├── org-context/            # ← 子模块 (组织规则)
│   ├── .agents/
│   └── .users/
└── AGENTS.md
```

### 4层规则合并

```
Layer 1: Global (用户全局)
    ~/.agents/                    # 个人AI规则

Layer 2: Organization (组织)
    org-context/.agents/          # 组织AI上下文

Layer 3: Project (项目)
    {project}/.agents/            # 项目AI规则

Layer 4: Local (按目录)
    {project}/packages/{pkg}/
    └── AGENTS.md                 # 按目录覆盖

合并优先级: Local > Project > Organization > Global
```

### 使用场景

```bash
# 在一个项目中完成所有工作:

# 编码任务
"重构这个函数"
→ 参考 .agents/context/ 规则进行工作

# 公司政策问题
"远程办公政策是什么？"
→ 读取 org-context/.users/policies/远程办公规定.md 并回答

# 工作流指南
"如何进行代码审查？"
→ 参考 org-context/.users/workflows/代码审查指南.md
```

## 快速开始: `/init` 命令

如果项目没有标准结构，可以使用`/init`命令自动生成。

```bash
# 在Caret聊天中
/init
```

此命令:
- 创建`.agents/`和`.users/`文件夹结构
- 提供默认规则模板
- **不会覆盖现有文件** (安全)

## 迁移现有项目

如果规则文件在其他位置，请移动到`.agents/context/`。

```
your-project/
├── .agents/
│   ├── context/          # 规则文件
│   │   └── coding.md     # 例如: 编码标准
│   └── workflows/        # 工作流 (可选)
└── AGENTS.md             # 根指令 (可选)
```

## 主要优点

### 1. 真正的伙伴关系
AI和开发者基于相同的文档进行沟通，消除误解。

### 2. Token效率
- 使用英语编写的`.agents/`文件节省token
- On-Demand Loading只加载必要的规则

### 3. 组织范围一致性
通过子模块，所有项目共享相同的组织规则。

### 4. 透明性
开发者可以通过`.agents/`文件夹清楚地了解AI的工作流程。

### 5. 团队一致性
- 所有团队成员使用相同规则
- AI可靠性 - 不会遗漏规则
- 版本控制 - 跟踪规则变更历史
- 灵活范围 - 选择项目/文件夹/全局

## 与Cline的完整比较

| 项目 | Cline | <BrandName /> |
|------|-------|-------|
| **知识共享** | 单个文件 (纯文本) | Atomic Knowledge System |
| **效率** | 始终加载所有规则 | On-Demand Loading |
| **角色分离** | 无 | AI/人类分离 |
| **引导** | 手动设置 | `/init` 自动脚手架 |
| **组织共享** | 无 | 子模块模式支持 |
| **规则优先级** | 不明确 | 明确的4层合并 |

## 开始使用

### 方法1: 自动初始化 (推荐)
```bash
# 在Caret聊天中
/init
```

### 方法2: 手动设置
1. 在项目根目录创建`.agents/context/`文件夹
2. 用Markdown文件编写规则
3. 开始与<BrandName />对话

详细的规则编写方法请参考[<BrandName />规则功能](/zh/features/caret-rules)文档。

## 相关文档

- [<BrandName />规则功能](/zh/features/caret-rules) - 规则编写指南
- [文档读取工具](/zh/caret-exclusive/document-tools) - AI直接读取文档功能
- [图像工具](/zh/caret-exclusive/image-tools) - AI图像生成/分析功能
