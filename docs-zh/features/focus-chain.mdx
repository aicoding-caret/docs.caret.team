---
title: "聚焦链"
sidebarTitle: "聚焦链"
---

聚焦链是 Caret 的任务管理增强功能,提供自动待办事项列表管理,并在整个任务过程中实时跟踪进度。

<figure>
	<img
		src="https://storage.googleapis.com/cline_public_images/docs/assets/2dos.gif"
		alt="聚焦链待办事项列表管理与实时进度跟踪"
	/>
</figure>

这使得 Caret 能够处理长期任务,无缝管理发送到 LLM 的上下文,并在多次上下文窗口重置后保持 Caret 的工作状态。

:::tip
  聚焦链与 Caret 的[深度规划斜杠命令](/zh/features/slash-commands/deep-planning)配合得特别好,为通过[规划流程](/zh/features/plan-and-act)创建的实施任务提供无缝的进度跟踪。
:::

## 主要功能

### 自动生成待办事项列表

Caret 会分析您的任务并自动创建全面的待办事项列表,包括:
- 以 markdown 检查清单格式呈现的清晰可操作的项目
- 将复杂任务逻辑分解为可管理的步骤
- 随着工作进展实时更新

### 用户可编辑的待办事项列表

待办事项列表以可编辑的 markdown 文件形式存储:
- 通过您喜欢的 markdown 编辑器直接编辑
- 自动检测您所做的更改
- 无缝集成回 Caret 的工作流程
- 通过任务标题中的编辑按钮快速访问

### 可视化进度跟踪

任务标题显示清晰的进度指示器:
- **步骤计数器**显示当前进度(例如,"3/8")
- **已完成项目**清楚地标记有复选标记
- **当前工作**用指示器突出显示
- **可展开视图**查看完整的待办事项列表

### 智能提醒系统

可配置的提醒确保待办事项列表保持最新:
- 默认每 6 条消息提醒一次(可自定义 1-100)
- 从计划模式切换到执行模式时自动提示
- 手动编辑待办事项列表时由用户触发更新


## 入门指南

**入门步骤:**

1. **设置**
   - 点击 Caret 侧边栏中的齿轮图标
   - 导航到"功能"部分

2. **配置**
   - 勾选"启用聚焦链"
   - 可选调整"提醒 Caret 间隔"(默认:6 条消息)

3. **使用**
   - 开始一个新任务
   - Caret 将自动开始创建和管理待办事项列表

| 设置 | 默认值 | 范围 | 描述 |
|---------|---------|-------|-------------|
| 启用聚焦链 | 禁用 | 开/关 | 启用增强的任务进度跟踪 |
| 提醒 Caret 间隔 | 6 | 1-100 条消息 | Caret 更新待办事项列表的频率 |

## 使用示例

#### 1. 任务启动

当您启用聚焦链启动新任务时:

``` markdown 用户请求
用户:"为我的 React 应用创建一个用户身份验证系统"

Caret:[分析请求并创建待办事项列表]
```

#### 2. 创建待办事项列表

Caret 为任务创建一个全面的计划,存储在 markdown 文件中:

```markdown 创建的待办事项列表
- [ ] 设置项目结构
- [ ] 安装身份验证依赖项
- [ ] 创建用户注册组件
- [ ] 实现登录功能
- [ ] 添加密码验证
- [ ] 设置用户数据库架构
- [ ] 编写身份验证测试
- [ ] 部署到暂存环境
```

#### 3. 进度跟踪

随着 Caret 的工作,任务标题会显示实时进度:

```markdown 待办事项列表标题
[3/8] 实现登录功能     ⌄
```

点击展开并查看完整列表:

```markdown 完整待办事项列表
✓ 设置项目结构
✓ 安装身份验证依赖项
✓ 创建用户注册组件
○ 实现登录功能  ← 当前正在处理
○ 添加密码验证
○ 设置用户数据库架构
○ 编写身份验证测试
○ 部署到暂存环境
```

#### 4. 用户编辑

需要调整待办事项列表?没问题。

**编辑流程:**

1. **打开编辑器**:点击展开的待办事项视图中的编辑按钮

2. **编辑文件**:在编辑器中打开一个 markdown 文件:

    ```markdown 编辑待办事项列表
    # 任务 abc123 的聚焦链待办事项列表

    <!-- 编辑此 markdown 文件以更新您的聚焦链待办事项列表 -->
    <!-- 使用 - [ ] 表示未完成的项目,使用 - [x] 表示已完成的项目 -->

    - [x] 设置项目结构
    - [x] 安装身份验证依赖项(例如,Firebase Auth)
    - [x] 创建用户注册组件
    - [ ] 实现登录功能
    - [ ] 添加密码重置功能
    - [ ] 设置受保护的路由
    - [ ] 实现注销功能
    - [ ] 添加用户个人资料页面
    - [ ] 编写身份验证测试
    - [ ] 部署到暂存环境

    <!-- 保存此文件以更新任务的待办事项列表 -->
    ```

3. **自定义**:根据需要添加、删除或重新排序项目

4. **保存**:Caret 会自动检测并使用您的更新

## 文件结构

### 待办事项列表存储

待办事项列表作为 markdown 文件存储在您的任务目录中:

``` markdown
<VSCode 全局存储>/
  tasks/
    <taskId>/
      focus_chain_taskid_<taskId>.md
      ... 其他任务文件
```

### Markdown 格式

待办事项文件使用标准 markdown 检查清单语法:

```markdown 待办事项语法示例
# 任务 abc123 的聚焦链待办事项列表

<!-- 编辑此 markdown 文件以更新您的聚焦链待办事项列表 -->
<!-- 使用格式:- [ ] 表示未完成的项目,- [x] 表示已完成的项目 -->

- [x] 设置项目结构
- [x] 安装身份验证依赖项
- [ ] 创建用户注册组件
- [ ] 实现登录功能
- [ ] 添加密码验证
- [ ] 设置用户数据库架构
- [ ] 编写身份验证测试
- [ ] 部署到暂存环境

<!-- 保存此文件,待办事项列表将在任务中更新 -->
```


## 与计划/执行模式集成

聚焦链与 Caret 的[计划/执行模式](/zh/features/plan-and-act)无缝协作:

- **计划模式**:用于呈现具体步骤的可选待办事项列表
- **执行模式**:从计划模式切换时自动创建待办事项

:::tip
  对于复杂的项目,先在计划模式下讨论并完善您的方法,然后再切换到执行模式进行实施。
:::

## 最佳实践

:::info
  :::tip
    1. **以明确的请求开始**
      - 提供详细的初始任务描述
      - 包括具体的要求和约束
      - 提及任何首选的技术或方法

    2. **审查生成的列表**
      - 检查 Caret 的分解是否符合您的期望
      - 验证是否包含所有重要步骤
      - 确保顺序对您的项目有意义

    3. **需要时进行编辑**
      - 添加您识别的缺失步骤
      - 删除不必要的项目
      - 重新排序步骤以获得更好的工作流程
      - 为一般项目添加更具体的细节
  :::
  :::tip
    1. **首先使用计划模式**
      - 在实施之前讨论方法
      - 通过对话完善需求
      - 准备开始工作时切换到执行模式

    2. **分解大型任务**
      - 将复杂项目拆分为更小、可管理的任务
      - 为不同组件创建单独的待办事项列表
      - 一次专注于一个主要领域

    3. **定期审查**
      - 在长期任务期间定期检查进度
      - 随着需求的发展更新待办事项列表
      - 通过编辑将更改传达给 Caret
  :::
  :::tip
    1. **共享待办事项文件**
      - 待办事项 markdown 文件可以与团队成员共享
      - 包含在版本控制中用于项目文档
      - 用作项目规划讨论的基础

    2. **一致的格式**
      - 遵循标准的 markdown 检查清单格式
      - 保持项目描述清晰可操作
      - 在待办事项列表中使用一致的术语
  :::
:::


## 故障排除

遇到问题?尝试这些快速修复:

:::info
  :::tip
    - 检查设置中是否启用了聚焦链
    - 聚焦链可能无法很好地与较小、功能较弱的模型配合使用
    - 确保任务目录中的文件权限正确
  :::
  :::tip
    - 验证您的编辑器支持 markdown
    - 检查 VSCode 对该目录是否有写权限
  :::
  :::tip
    - 确保待办事项使用正确的语法(`- [ ]` 和 `- [x]`)
    - 验证 markdown 文件格式正确
  :::
:::

仍然卡住?在 Caret 中使用 [/reportbug](/zh/features/slash-commands/report-bug) 命令获取帮助。

## 技术细节(给好奇者)

:::info
  :::tip
    - 实时文件监视检测待办事项 markdown 文件的更改
    - 文件编辑和 UI 更新之间的自动同步
    - 优雅地处理文件创建、修改和删除
  :::
  :::tip
    - 动态计算已完成与总待办事项的数量
    - 支持 `- [x]` 和 `- [X]` 两种完成语法
    - Unicode 符号(✓, ○)用于增强视觉显示
  :::
  :::tip
    - 待办事项列表本地存储在 VSCode 工作区中
    - 不会将待办事项内容传输到外部服务
    - 使用遥测(可在设置中禁用)
  :::
:::

聚焦链将 Caret 变成您的个人项目管理器,让您保持在正轨上,任务井井有条。在您的下一个项目中试试吧!
