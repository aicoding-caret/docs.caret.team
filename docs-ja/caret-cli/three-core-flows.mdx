---
title: "3つの主要フロー"
description: "Caret CLI の使い方: 対話モード、ヘッドレス自動化、マルチインスタンス並列化"
---

理解しておくべき 2 つの概念:

**タスク(Task)** - Caret が完了する単一の仕事です("utils.js にテスト追加"など)。要件を伝えると Caret が計画し実行します。タスクはインスタンス上で動作します。

**インスタンス(Instance)** - 独立した Caret ワークスペースです。各インスタンスは同時に 1 タスクのみ実行します。複数インスタンスで並列作業が可能です。

## 1. 対話モード: まず計画してから実行

Caret の動作を確認する最初の入口です。対話モードでは実行前に計画をレビューできます。

```bash
caret
```

現在のディレクトリで対話セッションが開きます。タスクを入力すると Plan モードで段階的な戦略を提案します。

準備ができたら実行へ切り替えます:

```bash
/act
```

Caret は承認された手順を実行します(ファイル読み書き、コマンド実行など)。全体を通じてユーザーが制御できます。

## 2. ヘッドレス単発: チャットなしで完了

1 行で自動実行したい場合に使います。

```bash
caret instance new --default
caret task new -y "Generate unit tests for all Go files"
```

`-y`(YOLO) フラグで対話なしに計画〜実行まで自動化できます。CI、cron、スクリプトに最適です。

例:

```bash
# 機能全体を生成
caret task new -y "Create a REST API for user authentication"

# ドキュメント生成
caret task new -y "Add JSDoc comments to all functions in src/"

# リファクタ
caret task new -y "Convert all var declarations to const/let"
```

進行状況の確認:

```bash
# タスク状態を表示
caret task view

# リアルタイムに追跡
caret task view --follow
```

Ctrl+C で終了します。

<Note>
YOLO モードは作業ディレクトリかクリーンな Git ブランチで慎重に実行してください。速度と引き換えにレビューが減るため、必要ならロールバックできる準備が必要です。
</Note>

## 3. マルチインスタンス: 並列エージェント

複数インスタンスで同一プロジェクトの作業を並列化できます。フロント/バックエンド/インフラを同時に進めるのに有効です。

最初のインスタンスを作成:

```bash
caret instance new
```

返されたアドレスを使ってタスクを割り当てます:

```bash
# 最初のインスタンスでフロントエンド作業
caret task new -y "Build React components"
```

2 つ目のインスタンスを作成し、同時にデフォルト設定:

```bash
caret instance new --default
```

以降はアドレス指定なしでデフォルトに送れます:

```bash
# 新しいデフォルトでバックエンド作業
caret task new -y "Implement API endpoints"
```

稼働中のインスタンス一覧:

```bash
caret instances list
```

すべて停止:

```bash
caret instances kill -a
```

<Tip>
`caret instance new` が返すアドレスは記録しておきましょう。複数エージェントのスクリプトでは、ID を保存して適切なインスタンスへ送信できます。
</Tip>

## どのフローを選ぶ？

- **対話モード**: 新しい問題の探索、Caret 学習、実行前レビューに最適
- **ヘッドレス単発**: 自動化、CI/CD、監督不要のタスクに最適
- **マルチインスタンス**: 並列化や文脈分離が必要な場合

<Tip>
詳細なコマンド/フラグは [CLI リファレンス](/ja/caret-cli/cli-reference) を参照してください。
</Tip>

## 次のステップ

<Columns cols={2}>
  <Card title="CLI リファレンス" icon="terminal" href="/ja/caret-cli/cli-reference">
    構成、インスタンス管理、タスクコマンドの完全なドキュメント。
  </Card>
  
  <Card title="Plan & Act" icon="brain" href="/ja/features/plan-and-act">
    Plan/Act モードの使い分けと切り替え方法を解説。
  </Card>
  
  <Card title="YOLO モード" icon="zap" href="/ja/features/yolo-mode">
    自動化と手動承認の使い分けを理解。
  </Card>
  
  <Card title="タスク管理" icon="clipboard-check" href="/ja/getting-started/task-management">
    タスク保存/復元とチェックポイント管理を学びます。
  </Card>
</Columns>
