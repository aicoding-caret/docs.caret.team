---
sidebar_position: 8
title: ^ AI組織知識とルール標準化
description: AIがチームのルールと標準を正確に従うことを保証するCaretの中核システムを紹介します。
---

# ^ AI組織知識とルール標準化

Caretは、AIが**チームのコーディングルールと標準を正確に理解し従う**ように設計されています。このシステムにより、AIは単純なコード生成ツールではなく、プロジェクトのコンテキストを理解する真のチームメンバーとして機能します。

## なぜ知識同期が重要ですか？

| 状況 | 一般的なAIツール | Careti |
|---|---|---|
| **チームルール遵守** | ルールを知らない | ✅ ルールファイルを自動認識 |
| **プロジェクトコンテキスト** | 毎回説明が必要 | ✅ 継続的に記憶 |
| **コードの一貫性** | ツールごとに異なるスタイル | ✅ チーム標準を維持 |
| **役割別最適化** | なし | ✅ AI用/人間用ドキュメント分離 |

## コアコンセプト1: デュアルディレクトリアーキテクチャ

Caretは、**AIと人間が読むドキュメントの目的が異なる**ことを認識しています。これに対応するため、2つのディレクトリを使用します：

```
your-project/
├── .agents/                    # AI用 (英語、トークン最適化)
│   ├── context/               # システムルール
│   │   ├── agents-rules.json  # メインルールファイル (SoT)
│   │   └── ai-work-index.yaml # 作業インデックス
│   ├── workflows/             # タスクワークフロー
│   │   └── atoms/             # 再利用可能なビルディングブロック
│   ├── skills/                # AIスキル
│   └── hooks/                 # イベントフック
│
├── .users/                     # 人間用 (ネイティブ言語、詳細)
│   ├── context/               # プロジェクトコンテキスト (Markdown)
│   ├── workflows/             # ワークフローガイド
│   └── skills/                # スキルガイド
│
└── AGENTS.md                   # AIエントリーポイント
```

### なぜ分離するのですか？

| 区分 | `.agents/` (AI用) | `.users/` (人間用) |
|------|-------------------|-------------------|
| **言語** | 英語 (トークン効率) | ネイティブ言語 |
| **形式** | JSON/YAML (構造化) | Markdown (可読性) |
| **目的** | 決定論的な動作を保証 | 詳細な説明を提供 |
| **対象** | AIエージェント | 開発者/チームメンバー |

**トークン最適化**: `.agents/`のファイルは英語で書かれており、同じ意味をより少ないトークンで伝えます。これによりコンテキストウィンドウを効率的に使用し、コストを削減します。

## コアコンセプト2: Atomic Knowledge System

Caretは**Atomic Knowledge（知識の原子化）**方式を使用します。巨大な単一ドキュメントの代わりに、知識を最小単位（Atom）に分割し、必要に応じて組み合わせます。

### 動作方式

1. **タスク分析**: AIが`ai-work-index.yaml`を読んでタスクタイプを識別
2. **ワークフローロード**: 該当タスクのワークフローファイルのみ読み込み
3. **知識原子の組み合わせ**: ワークフローが参照するatomsのみ追加ロード
4. **タスク実行**: 組み合わせた知識でタスク実行

### 例

```
.agents/workflows/
├── code-review.md             # コードレビューワークフロー
├── feature-implementation.md  # 機能実装ワークフロー
└── atoms/                     # 再利用可能なビルディングブロック
    ├── tdd-cycle.md           # TDDサイクル
    ├── naming-conventions.md  # 命名規則
    └── document-changes.md    # 変更のドキュメント化
```

**メリット**: AIがすべてのルールを常にロードする代わりに、現在のタスクに必要なルールのみを選択的にロードして**トークンを節約**します。

## コアコンセプト3: ルールの位置と優先順位

Caretは**`.agents/context/`**フォルダをルールの単一ソースとして使用します。これにより、AIはプロジェクト全体で一貫した標準に従います。

### ルールの位置

| タイプ | 位置 | 用途 |
|------|------|------|
| **ワークスペースルール** | `.agents/context/` | プロジェクト固有のルール |
| **ディレクトリスコープ** | `AGENTS.md` | 特定フォルダにのみ適用 |
| **グローバルルール** | `Documents/Careti/Rules` | すべてのプロジェクトに適用 |
| **ワークフロー** | `.agents/workflows/` | オンデマンドローディング |

### なぜ標準化が重要ですか？

| 問題 | 解決策 |
|------|------|
| ルールが複数の場所に散在 | 一箇所で管理 |
| ルールの競合が発生 | 明確な優先順位 |
| AIがルールを見落とす | 自動ローディングを保証 |

## コアコンセプト4: 組織間知識同期

サブモジュールを活用すると、**組織全体のルールと知識を複数のプロジェクトで共有**できます。

### 組織リポジトリパターン

```
org-context/                      # 組織共有リポジトリ (Git)
├── .agents/                      # AIコンテキスト
│   ├── context/                  # 組織ルール/ポリシー
│   │   ├── conventions.md        # 開発規約
│   │   ├── tech-stack.md         # 技術スタック
│   │   └── security-policy.md    # セキュリティポリシー
│   └── workflows/                # ワークフロー定義
│       ├── code-review.md
│       └── release-process.md
│
├── .users/                       # ユーザードキュメント (ミラーリング)
│   ├── context/
│   │   ├── 開発標準.md           # 詳細ガイド
│   │   └── 技術スタック.md
│   └── workflows/
│       └── コードレビューガイド.md
│
└── AGENTS.md                     # 組織AIエントリーポイント
```

### サブモジュールとして接続

```bash
# 組織コンテキストをサブモジュールとして追加
git submodule add git@github.com:your-org/org-context.git
```

```
your-project/
├── .agents/                # プロジェクトルール
├── .users/                 # プロジェクトユーザードキュメント
├── org-context/            # ← サブモジュール (組織ルール)
│   ├── .agents/
│   └── .users/
└── AGENTS.md
```

### 4階層ルールマージ

```
Layer 1: Global (ユーザー全体)
    ~/.agents/                    # 個人AIルール

Layer 2: Organization (組織)
    org-context/.agents/          # 組織AIコンテキスト

Layer 3: Project (プロジェクト)
    {project}/.agents/            # プロジェクトAIルール

Layer 4: Local (ディレクトリ別)
    {project}/packages/{pkg}/
    └── AGENTS.md                 # ディレクトリ別オーバーライド

マージ優先順位: Local > Project > Organization > Global
```

### 使用シナリオ

```bash
# 一つのプロジェクトですべての作業が可能:

# コーディング作業
"この関数をリファクタリングして"
→ .agents/context/ ルールを参照して作業

# 会社ポリシーの質問
"リモートワーク規定を教えて"
→ org-context/.users/policies/リモートワーク規定.md を読んで回答

# ワークフローガイド
"コードレビューはどうやるの？"
→ org-context/.users/workflows/コードレビューガイド.md を参照
```

## クイックスタート: `/init` コマンド

プロジェクトに標準構造がない場合、`/init`コマンドで自動生成できます。

```bash
# Caretチャットで
/init
```

このコマンドは:
- `.agents/` と `.users/` フォルダ構造を作成
- デフォルトルールテンプレートを提供
- **既存ファイルは上書きしない** (安全)

## 既存プロジェクトの移行

他の場所にルールファイルがある場合は、`.agents/context/`に移動してください。

```
your-project/
├── .agents/
│   ├── context/          # ルールファイル
│   │   └── coding.md     # 例: コーディング標準
│   └── workflows/        # ワークフロー (オプション)
└── AGENTS.md             # ルート指示 (オプション)
```

## 主要なメリット

### 1. 真のパートナーシップ
AIと開発者が同じドキュメントに基づいてコミュニケーションし、誤解をなくします。

### 2. トークン効率
- 英語で書かれた`.agents/`ファイルでトークン節約
- On-Demand Loadingで必要なルールのみロード

### 3. 組織全体の一貫性
サブモジュールを通じて、すべてのプロジェクトが同じ組織ルールを共有します。

### 4. 透明性
開発者は`.agents/`フォルダを通じてAIがどのような手順で作業するか明確に把握できます。

### 5. チームの一貫性
- すべてのチームメンバーが同じルールを使用
- AI信頼性 - ルールを見落とすことがない
- バージョン管理 - ルール変更履歴を追跡
- 柔軟なスコープ - プロジェクト/フォルダ/グローバルを選択

## Clineとの完全比較

| 項目 | Cline | Careti |
|------|-------|-------|
| **知識共有** | 単一ファイル (プレーンテキスト) | Atomic Knowledge System |
| **効率性** | すべてのルールを常にロード | On-Demand Loading |
| **役割分離** | なし | AI/人間分離 |
| **ブートストラップ** | 手動設定 | `/init` 自動スキャフォールド |
| **組織共有** | なし | サブモジュールパターンサポート |
| **ルール優先順位** | 不明確 | 明確な4階層マージ |

## はじめに

### 方法1: 自動初期化 (推奨)
```bash
# Caretチャットで
/init
```

### 方法2: 手動設定
1. プロジェクトルートに`.agents/context/`フォルダを作成
2. Markdownファイルでルールを記述
3. Caretとの会話を開始

詳細なルール作成方法は、[Caretルール機能](/ja/features/caret-rules)ドキュメントを参照してください。

## 関連ドキュメント

- [Caretルール機能](/ja/features/caret-rules) - ルール作成ガイド
- [ドキュメント読み取りツール](/ja/caret-exclusive/document-tools) - AIがドキュメントを直接読み取る機能
- [イメージツール](/ja/caret-exclusive/image-tools) - AI画像生成/分析機能
