---
title: "Команда Глубокого Планирования"
sidebarTitle: "/deep-planning"
---

`/deep-planning` превращает Caret в кропотливого архитектора, который исследует вашу кодовую базу, задает уточняющие вопросы и создает всесторонний план реализации, прежде чем написать хоть строчку кода.

<Frame>
	<img
		src="https://storage.googleapis.com/cline_public_images/docs/assets/deep-planning.png"
		alt="Команда Deep Planning в действии, показывающая процесс исследования и планирования"
	/>
</Frame>

Когда вы используете `/deep-planning`, Caret следует четырехэтапному процессу, который отражает подход опытных разработчиков к сложным функциям: тщательное исследование, обсуждение и уточнение требований, детальное планирование и структурированное создание задач с отслеживанием прогресса.

## Четырехэтапный процесс

### Шаг 1: Тихое исследование

Caret становится детективом, молча изучая вашу кодовую базу, чтобы понять ее структуру, шаблоны и ограничения. Он изучает исходные файлы, анализирует шаблоны импорта, обнаруживает иерархии классов и выявляет маркеры технического долга. Никаких комментариев, никакого повествования - только целенаправленное исследование.

На этом этапе Caret выполняет такие команды, как:
- Поиск всех определений классов и функций по всей вашей кодовой базе
- Анализ шаблонов импорта для понимания зависимостей
- Обнаружение структуры проекта и организации файлов
- Выявление TODO и технического долга

### Шаг 2: Обсуждение и вопросы

Как только Caret поймет вашу кодовую базу, он задаст целенаправленные вопросы, которые определят реализацию. Это не общие вопросы - они специфичны для вашего проекта и функции, которую вы создаете.

Вопросы могут охватывать:
- Уточнение неоднозначных требований
- Выбор между одинаково допустимыми подходами к реализации
- Подтверждение предположений о поведении системы
- Понимание предпочтений в технических решениях

### Шаг 3: Документ с планом реализации

Caret создает структурированный документ в формате markdown (`implementation_plan.md`), который служит вашим планом реализации. Это не расплывчатый набросок - это подробная спецификация с точными путями к файлам, сигнатурами функций и порядком реализации.

План включает восемь всесторонних разделов:
- **Обзор**: Цель и высокоуровневый подход
- **Типы**: Полные определения типов и структуры данных
- **Файлы**: Точные файлы для создания, изменения или удаления
- **Функции**: Новые и измененные функции с сигнатурами
- **Классы**: Изменения классов и детали наследования
- **Зависимости**: Требования к пакетам и версии
- **Тестирование**: Стратегии проверки и требования к тестированию
- **Порядок реализации**: Пошаговая последовательность выполнения

### Шаг 4: Создание задачи реализации

Caret создает новую задачу, которая ссылается на документ с планом и включает отслеживаемые этапы реализации. Задача содержит конкретные команды для чтения каждого раздела плана, что гарантирует, что реализующий агент (будь то вы или Caret в режиме Act Mode) может эффективно перемещаться по плану.

<Tip>
  Deep Planning прекрасно работает с [Focus Chain](/russian/features/focus-chain). Этапы реализации автоматически становятся списком дел с отслеживанием прогресса в реальном времени, поддерживая организацию и отслеживание сложных проектов.
</Tip>

## Использование Deep Planning

Начните сеанс глубокого планирования, набрав `/deep-planning`, а затем описание функции:

```
/deep-planning Добавить аутентификацию пользователей с помощью JWT tokens и контроля доступа на основе ролей
```

Caret немедленно начнет свое исследование. Вы увидите, как он читает файлы и выполняет команды, чтобы понять вашу кодовую базу. Как только он соберет достаточно контекста, он вовлечет вас в обсуждение, прежде чем создавать план.

## Пример рабочего процесса

Вот как я использую `/deep-planning` для реальной функции:

<Steps>
  <Step title="Инициировать планирование">
    Я набираю `/deep-planning реализовать уровень кэширования для API responses`
  </Step>
  <Step title="Тихое исследование">
    Caret изучает мою кодовую базу, исследуя:
    - Текущую структуру API и endpoints
    - Существующие шаблоны потока данных
    - Запросы к базе данных и узкие места в производительности
    - Конфигурацию и настройку окружения
  </Step>
  <Step title="Целенаправленное обсуждение">
    Caret спрашивает меня:
    - "Следует ли нам использовать Redis или in-memory caching?"
    - "Какова приемлемая степень устаревания кэша для пользовательских данных?"
    - "Нужны ли вам webhooks для инвалидации кэша?"
  </Step>
  <Step title="Создание плана">
    Caret генерирует `implementation_plan.md` с:
    - Спецификациями класса службы кэширования
    - Конфигурацией подключения Redis
    - Измененными API endpoints с логикой кэширования
    - Стратегиями генерации ключей кэша
    - Конфигурациями TTL для разных типов данных
  </Step>
  <Step title="Создание задачи">
    Caret создает новую задачу с:
    - Ссылкой на план реализации
    - Командами для чтения определенных разделов
    - Отслеживаемыми элементами todo для каждого этапа реализации
    - Запросом на переключение в Act Mode для выполнения
  </Step>
</Steps>

## Интеграция с режимом Plan/Act

Deep Planning разработан для бесперебойной работы с [режимом Plan/Act](/russian/features/plan-and-act):

- Используйте `/deep-planning` в режиме Plan Mode для этапов исследования и планирования
- Сгенерированная задача запрашивает переключение в режим Act Mode для реализации
- Focus Chain автоматически отслеживает прогресс выполнения этапов реализации

Такое разделение гарантирует, что планирование остается сосредоточенным на архитектуре, а реализация - на выполнении.

## Лучшие практики

### Когда использовать Deep Planning

Используйте `/deep-planning` для:
- Функций, затрагивающих несколько частей вашей кодовой базы
- Архитектурных изменений, требующих тщательной координации
- Сложных интеграций с внешними сервисами
- Усилий по рефакторингу, требующих систематического выполнения
- Любой функции, для которой вы обычно тратите время на вайтбординг

### Максимальное использование исследования

Позвольте Caret завершить свое исследование тщательно. Качество плана напрямую связано с тем, насколько хорошо он понимает вашу кодовую базу. Если у вас есть конкретные области, которые он должен изучить, упомяните их в своем первоначальном запросе.

### Проверка плана

Всегда проверяйте `implementation_plan.md` перед началом реализации. План является всесторонним, но не неизменным - вы можете редактировать его напрямую, если это необходимо. Думайте об этом как о совместном документе между вами и Caret.

### Отслеживание прогресса

Когда Focus Chain включен, ход вашей реализации отображается в заголовке задачи. Каждый завершенный шаг автоматически отмечается по мере того, как Caret прорабатывает план, предоставляя вам видимость в реальном времени сложных реализаций.

## Вдохновение

Я использую `/deep-planning` всякий раз, когда собираюсь построить что-то, что обычно требует проектной документации. Недавние примеры из моего рабочего процесса:

- **Миграция систем аутентификации**: Deep Planning отобразил каждый endpoint, определил все точки взаимодействия с аутентификацией и создал план миграции, который позволил избежать критических изменений.

- **Добавление функций реального времени**: План охватывал интеграцию WebSocket, обработку событий, синхронизацию состояния и механизмы отката при отключениях.

- **Рефакторинг схемы базы данных**: Caret выявил все затронутые запросы, создал скрипты миграции и запланировал развертывание, чтобы свести к минимуму время простоя.

- **Реализация версионирования API**: План детализировал изменения маршрутов, уровни обратной совместимости, уведомления об устаревании и пути миграции клиентов.

Сила `/deep-planning` заключается в том, что он заставляет задуматься об архитектуре перед реализацией. Это как если бы опытный разработчик проверял ваш подход, прежде чем вы напишете код, за исключением того, что этот разработчик обладает совершенным знанием всей вашей кодовой базы.

<Note>
  Deep Planning требует моделей с сильными возможностями рассуждения. Он лучше всего работает с моделями последнего поколения, такими как GPT-5, Claude 4, Gemini 2.5 или Grok 4. Меньшие модели могут испытывать трудности с требуемым всесторонним анализом.
</Note>

Для более простых задач, не требующих обширного планирования, рассмотрите возможность использования [/newtask](/russian/features/slash-commands/new-task) для создания сфокусированных задач с контекстом или сразу переходите к реализации, если путь вперед ясен.
