---
title: "Автоматическое резюмирование контекста"
sidebarTitle: "Auto Compact"
---

Когда ваш разговор приближается к пределу контекстного окна модели, Careti автоматически резюмирует его, чтобы освободить место и продолжить работу.

<Frame>
	<img
		src="https://storage.googleapis.com/cline_public_images/docs/assets/condensing.png"
		alt="Функция Auto-compact сжатия контекста разговора"
	/>
</Frame>

## Как это работает

Careti контролирует использование токенов во время вашего разговора. Когда вы приближаетесь к пределу, он:

1. Создаёт комплексный краткий обзор всего, что произошло
2. Сохраняет все технические детали, изменения кода и решения
3. Заменяет историю разговора с кратким обзором
4. Продолжает именно с того места, где он остановился

Вы увидите вызов инструмента резюмирования, когда это произойдёт, показывающий общую стоимость, как и любой другой вызов API в представлении чата.

## Почему это важно

Ранее Careti обрезал более старые сообщения при достижении пределов контекста. Это означало потерю важного контекста с более ранней части разговора.

Теперь с резюмированием:
- Все технические решения и паттерны кода сохраняются
- Изменения файлов и контекст проекта остаются неповреждёнными
- Careti помнит всё, что он сделал
- Вы можете работать с гораздо большими проектами без прерываний

<Tip>
Резюмирование контекста работает красиво в синергии с [Focus Chain](/ru/features/focus-chain). Когда Focus Chain включен, списки задач сохраняются при резюмировании. Это означает, что Careti может работать над долгосрочными задачами, которые охватывают несколько контекстных окон, оставаясь на курсе со списком задач, направляющим его через каждый сброс.
</Tip>

## Технические детали

Резюмирование происходит через ваш настроенный поставщик API, используя ту же модель, которую вы уже используете. Оно использует кэширование подсказок для минимизации затрат.

1. Careti использует [подсказку резюмирования](https://github.com/caret/caret/blob/main/src/core/prompts/contextManagement.ts) для запроса краткого обзора разговора.

2. После создания краткого обзора Careti заменяет историю разговора [подсказкой продолжения](https://github.com/caret/caret/blob/main/src/core/prompts/contextManagement.ts#L69), которая просит Careti продолжить работу и предоставляет краткий обзор как контекст.

Различные модели имеют различные пороги окна контекста для автоматического резюмирования. Вы можете увидеть, как пороги определяются в [context-window-utils.ts](https://github.com/caret/caret/blob/main/src/core/context/context-management/context-window-utils.ts).

## Соображения по затратам

Резюмирование использует ваш существующий кэш подсказок из разговора, поэтому оно стоит примерно столько же, сколько любой другой вызов инструмента.

Так как большинство входных токенов уже кэшированы, вы в основном платите за генерацию краткого обзора (выходные токены), что делает это очень экономичным.

## Восстановление контекста с контрольными точками

Вы можете использовать [контрольные точки](/ru/features/checkpoints) для восстановления состояния вашей задачи до резюмирования. Это означает, что вы никогда действительно не теряете контекст — вы всегда можете откатиться к предыдущим версиям вашего разговора.

<Note>
  Редактирование сообщения до вызова инструмента резюмирования будет работать аналогично контрольной точке, позволяя вам восстановить разговор к этому моменту.
</Note>

## Поддержка моделей следующего поколения

Auto Compact использует передовое резюмирование на основе LLM, которое, как мы выяснили, значительно лучше работает для моделей следующего поколения. Мы в настоящее время поддерживаем эту функцию для следующих моделей:

- **Claude 4 series**
- **Gemini 2.5 series**
- **GPT-5**
- **Grok 4**

<Note>
При использовании других моделей Careti автоматически возвращается к стандартному методу обрезки контекста на основе правил, даже если Auto Compact включен в настройках.
</Note>
