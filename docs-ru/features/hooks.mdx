---
title: "Хуки"
sidebarTitle: "Хуки"
description: "Внедрите пользовательскую логику в рабочий процесс Caret для проверки операций, контроля использования инструментов и формирования решений AI"
---

Хуки позволяют вам внедрить пользовательскую логику в рабочий процесс Caret в ключевые моменты. Думайте о них как об автоматизированных контрольных точках, где вы можете проверить операции перед выполнением, контролировать использование инструментов по мере его происхождения и формировать то, как Caret принимает решения.

Хуки запускаются автоматически, когда происходят определённые события во время разработки. Они получают подробную информацию о каждой операции, могут заблокировать проблемные действия перед их выполнением, и могут внедрить контекст, который направляет будущие решения AI.

Настоящая мощь приходит из комбинирования этих возможностей. Вы можете:

- Остановить операции перед тем, как они вызовут проблемы (например, создание файлов `.js` в проекте TypeScript)
- Учиться из того, что происходит, и развивать знание проекта с течением времени
- Контролировать производительность и ловить проблемы по мере их возникновения
- Отслеживать всё в целях аналитики или соответствия
- Запускать внешние инструменты или сервисы в правильные моменты

<Warning>
Хуки в настоящее время поддерживаются только на macOS и Linux. Поддержка Windows недоступна.
</Warning>

## Как начать

<Frame>
	<img src="https://storage.googleapis.com/cline_public_images/hooks.gif" alt="Хуки в действии" />
</Frame>

Включение хуков в Caret просто. Вот что вам нужно сделать:

<Steps>
<Step title="Включить хуки в параметрах">
Откройте параметры Caret и установите флажок **"Enable Hooks"**.

Вы можете найти этот параметр следующим образом:
1. Откройте Caret
2. Нажмите кнопку "Settings" в верхнем правом углу
3. Нажмите на раздел "Feature" в левом меню навигации.
4. Прокрутите вниз до тех пор, пока не увидите флажок "Enable Hooks" и установите его.
</Step>

<Step title="Выберите размещение хука">
Решите, где разместить ваши хуки:

**Для личных или организационных хуков:**
- Создайте хуки в `~/Documents/.agents/hooks/`
- Они автоматически применяются ко всем рабочим областям

**Для хуков, специфичных для проекта:**
- Создайте хуки в `.agents/hooks/` в корневом каталоге вашего проекта
- Они применяются только к определённой рабочей области
- Фиксируйте их в контроль версии, чтобы ваша команда могла их использовать тоже
</Step>

<Step title="Создайте свой первый хук">
Файлы хуков должны иметь точные имена без расширений файлов. Например, для создания хука TaskStart:

```bash
# Создать файл хука
vim .agents/hooks/TaskStart
```

Добавьте ваш скрипт (должен начинаться с shebang)
``` bash
#!/usr/bin/env bash

# Сохраните введённый ввод в переменную
input=$(cat)

# Дамп всего полезного груза JSON
echo "$input" | jq .

# Получить тип поля
echo "$input" | jq -r '.timestamp | type'
```

Этот пример скрипта демонстрирует ключевые механики ввода/вывода хука: чтение полезного груза JSON из stdin с помощью `input=$(cat)`, и использование `jq` для инспекции структуры данных и типов полей, которые ваш хук получает. Это помогает вам понять, какие данные доступны перед созданием более сложной логики хука.

**Сделайте его исполняемым**
