---
title: "Anthropic"
description: "Узнайте, как настроить и использовать модели Anthropic Claude в Caret. Охватывает настройку API-ключа, выбор модели и расширенные функции, такие как Prompt Caching."
---

<Note>
Это справочный документ для Caret. Он соответствует версии Caret v3.38.2. Если применяются специфические политики Caret (поддерживаемые/заблокированные модели, региональные ограничения, аутентификация/маршрутизация), они помечаются тегом `<Note>` в тексте.
</Note>

<Note>
Улучшенная настройка провайдера: на основании `caret-docs/features/f09-enhanced-provider-setup.md`, в Caret может быть усилена валидация настроек провайдера и UX. Обратите внимание, что список разрешенных или заблокированных моделей может меняться в зависимости от политик аккаунта или организации.
</Note>

**Website:** [https://www.anthropic.com/](https://www.anthropic.com/)

### Получение API-ключа

1.  **Регистрация/Вход:** Перейдите в [Anthropic Console](https://console.anthropic.com/). Создайте аккаунт или войдите в систему.
2.  **Переход к API Keys:** Перейдите в раздел [API keys](https://console.anthropic.com/settings/keys).
3.  **Создание ключа:** Нажмите "Create Key". Дайте ключу описательное имя (например, "Caret").
4.  **Копирование ключа:** **Важно:** Скопируйте API-ключ _немедленно_. Вы не сможете увидеть его снова. Храните его в безопасном месте.

### Поддерживаемые модели

Caret поддерживает следующие модели Anthropic Claude:

-   `claude-haiku-4-5-20251001`
-   `claude-opus-4-5-20251101`
-   `claude-opus-4-1-20250805`
-   `claude-opus-4-20250514`
-   `anthropic/claude-sonnet-4.5` (Рекомендуется)
-   `claude-3-7-sonnet-20250219`
-   `claude-3-5-sonnet-20241022`
-   `claude-3-5-haiku-20241022`
-   `claude-3-opus-20240229`
-   `claude-3-haiku-20240307`

Подробную информацию о возможностях каждой модели см. в [документации Anthropic по моделям](https://docs.anthropic.com/en/docs/about-claude/models).

### Конфигурация в Caret

1.  **Откройте настройки Caret:** Нажмите на иконку настроек (⚙️) в панели Caret.
2.  **Выберите провайдера:** Выберите "Anthropic" из выпадающего списка "API Provider".
3.  **Введите API-ключ:** Вставьте ваш API-ключ Anthropic в поле "Anthropic API Key".
4.  **Выберите модель:** Выберите желаемую модель Claude из выпадающего списка "Model".
5.  **(Опционально) Custom Base URL:** Если вам нужно использовать пользовательский базовый URL для Anthropic API, установите флажок "Use custom base URL" и введите URL. Большинству пользователей не потребуется изменять этот параметр.

### Extended Thinking

Модели Anthropic предлагают функцию «Extended Thinking», разработанную для расширения возможностей рассуждения при выполнении сложных задач. Эта функция позволяет модели выводить пошаговый процесс мышления перед предоставлением окончательного ответа, обеспечивая прозрачность и позволяя проводить более тщательный анализ сложных промптов.

Когда функция Extended Thinking включена в Caret, модель генерирует блоки контента `thinking`, которые детально описывают её внутренние рассуждения. Эти данные затем включаются в финальный ответ.
Пользователи Caret могут воспользоваться этой возможностью, установив флажок `Enable Extended Thinking` под меню выбора модели после выбора модели Claude от любого провайдера.

**Основные аспекты Extended Thinking:**

-   **Поддерживаемые модели:** Эта функция доступна для некоторых моделей, включая Claude Opus 4, Claude Sonnet 4.5 и Claude Sonnet 3.7.
-   **Summarized Thinking (Claude 4):** Для моделей Claude 4 и 4.5 API возвращает краткое изложение (summary) полного процесса мышления, чтобы сбалансировать информативность и эффективность, а также предотвратить злоупотребления. Оплата взимается за полные токены мышления (thinking tokens), а не только за краткое изложение.
-   **Стриминг:** Ответы Extended Thinking, включая блоки `thinking`, поддерживают стриминг.
-   **Tool Use и Prompt Caching:** Extended Thinking взаимодействует с использованием инструментов (требуется передача блоков мышления обратно) и Prompt Caching (со специфическим поведением в отношении аннулирования кэша и контекста).

Для получения подробной информации о том, как работает Extended Thinking, включая примеры API, взаимодействие с Tool Use, Prompt Caching и цены, пожалуйста, обратитесь к [официальной документации Anthropic по Extended Thinking](https://docs.anthropic.com/en/docs/build-with-claude/extended-thinking).

### Советы и примечания

-   **Prompt Caching:** Модели Claude 3 поддерживают [prompt caching](https://docs.anthropic.com/en/docs/build-with-claude/prompt-caching), что может значительно снизить затраты и задержки при повторных запросах.
-   **Окно контекста:** Модели Claude имеют большие окна контекста (200,000 токенов), что позволяет включать значительный объем кода и контекста в ваши промпты.
-   **Цены:** Актуальную информацию о стоимости см. на странице [Anthropic Pricing](https://www.anthropic.com/pricing).
-   **Лимиты запросов:** У Anthropic действуют строгие лимиты запросов (Rate Limits), основанные на [уровнях использования](https://docs.anthropic.com/en/api/rate-limits#requirements-to-advance-tier). Если вы постоянно сталкиваетесь с ограничениями, рассмотрите возможность обращения в отдел продаж Anthropic или доступа к Claude через других провайдеров, таких как [OpenRouter](/russian/provider-config/openrouter) или [Requesty](/russian/provider-config/requesty).