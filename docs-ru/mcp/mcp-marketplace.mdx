---
title: "MCP: Легкий старт"
description: "Узнайте, как использовать MCP Marketplace для поиска, установки и настройки MCP-серверов, которые расширяют возможности Caret с помощью дополнительных инструментов и ресурсов."
---

## Что такое MCP-сервер?

MCP-серверы - это специализированные расширения, которые расширяют возможности Caret. Они позволяют Caret выполнять дополнительные задачи, такие как получение веб-страниц, обработка изображений, доступ к API и многое другое.

## Обзор MCP Marketplace

MCP Marketplace предоставляет возможность установки в один клик для сотен MCP-серверов в различных категориях.

### 1. Откройте Marketplace

-   В Caret нажмите кнопку "Extensions" (значок квадрата) на верхней панели инструментов.
-   Откроется MCP Marketplace, показывающий доступные серверы по категориям.

### 2. Просмотрите и выберите сервер

-   Просматривайте серверы по категориям (Search, File-systems, Browser-automation, Research-data и т.д.).
-   Нажмите на сервер, чтобы увидеть подробную информацию о его возможностях и требованиях.

### 3. Установите и настройте

-   Нажмите кнопку установки для выбранного сервера.
-   Если серверу требуется API key (в большинстве случаев это так), Caret проведет вас через:
    -   Где получить API key
    -   Как безопасно его ввести
-   Сервер будет автоматически добавлен в ваши настройки MCP.

### 4. Проверьте установку

-   Caret покажет подтверждение после завершения установки.
-   Проверьте статус сервера в пользовательском интерфейсе настроек MCP в Caret.

### 5. Использование вашего нового сервера

-   После успешной установки Caret автоматически интегрирует возможности сервера.
-   Вы увидите новые инструменты и ресурсы, доступные в системном запросе Caret.
-   Просто попросите Caret использовать возможности вашего нового сервера.
-   Пример: "Search the web for recent React updates using Perplexity"

**Корпоративные пользователи:** Если вы используете Caret в корпоративной среде, убедитесь, что у вас есть разрешение на установку сторонних MCP-серверов в соответствии с политиками безопасности вашей организации.

## Что происходит за кулисами

При установке MCP-сервера происходит несколько вещей автоматически:

### 1. Процесс установки

-   Код сервера клонируется/устанавливается в `/Users/<username>/Documents/Caret/MCP/`
-   Устанавливаются зависимости
-   Сервер собирается (компиляция TypeScript/JavaScript или установка пакета Python)

### 2. Конфигурация

-   Файл настроек MCP обновляется конфигурацией вашего сервера
-   Этот файл находится по адресу: `/Users/<username>/Library/Application Support/Code/User/globalStorage/saoudrizwan.claude-dev/settings/cline_mcp_settings.json`
-   Переменные окружения (например, API keys) надежно хранятся
-   Путь к серверу регистрируется

### 3. Запуск сервера

-   Caret обнаруживает изменение конфигурации
-   Caret запускает ваш сервер как отдельный процесс
-   Связь устанавливается через stdio или HTTP

### 4. Интеграция с Caret

-   Возможности вашего сервера добавляются в системный запрос Caret
-   Инструменты становятся доступными через команды `use_mcp_tool`
-   Ресурсы становятся доступными через команды `access_mcp_resource`
-   Caret теперь может использовать эти возможности по запросу пользователя

## Устранение неполадок

### Системные требования

Убедитесь, что ваша система соответствует следующим требованиям:

-   **Node.js 18.x или новее**
    -   Проверьте, выполнив: `node --version`
    -   Установите с: https://nodejs.org/
    -   Требуется для реализаций JavaScript/TypeScript
-   **Python 3.10 или новее**
    -   Проверьте, выполнив: `python --version`
    -   Установите с: https://python.org/
    -   Примечание: Некоторым специализированным реализациям может потребоваться Python 3.11+
-   **UV Package Manager**
    -   Современный менеджер пакетов Python для изоляции зависимостей
    -   Установите с помощью:
        ```bash
        curl -LsSf https://astral.sh/uv/install.sh | sh
        ```
        Или: `pip install uv`
    -   Проверьте с помощью: `uv --version`

Если какая-либо из этих команд завершается неудачно или показывает более старые версии, пожалуйста, установите/обновите, прежде чем продолжить!

### Распространенные проблемы при установке

-   Убедитесь, что ваше интернет-соединение стабильно
-   Убедитесь, что у вас есть необходимые разрешения для установки нового программного обеспечения
-   Убедитесь, что API key введен правильно (если требуется)
-   Проверьте статус сервера в пользовательском интерфейсе настроек MCP на наличие сообщений об ошибках

### Как удалить MCP-сервер

Чтобы полностью удалить неисправный MCP-сервер:

1. Откройте файл настроек MCP: `/Users/<username>/Library/Application Support/Code/User/globalStorage/saoudrizwan.claude-dev/settings/cline_mcp_settings.json`
2. Удалите всю запись для вашего сервера из объекта `mcpServers`
3. Сохраните файл
4. Перезапустите Caret

### Я все еще получаю ошибку

Если вы получаете ошибку при использовании MCP-сервера, вы можете попробовать следующее:

-   Проверьте файл настроек MCP на наличие ошибок
-   Используйте Claude Sonnet model для установки
-   Убедитесь, что пути к файлам вашего сервера указаны правильно
-   Убедитесь, что все необходимые переменные окружения установлены
-   Проверьте, не использует ли другой процесс тот же порт (для серверов на основе HTTP)
-   Попробуйте удалить и переустановить сервер (удалите как из файла `cline_mcp_settings.json`, так и из каталога `/Users/<username>/Documents/Caret/MCP/`)
-   Используйте терминал и запустите команду с ее аргументами напрямую. Это позволит вам увидеть те же ошибки, которые видит Caret.

## Правила MCP-серверов

Caret уже знает о ваших активных MCP-серверах и для чего они предназначены, но когда у вас включено много MCP-серверов, может быть полезно определить, когда использовать каждый сервер.

Используйте файл `.agents/context` или пользовательские инструкции для поддержки интеллектуальной активации MCP-сервера с помощью триггеров на основе ключевых слов, что сделает выбор инструментов Caret более интуитивным и контекстно-зависимым.

### Как работают правила MCP

Правила MCP группируют ваши подключенные MCP-серверы в функциональные категории и определяют ключевые слова-триггеры, которые автоматически активируют их при обнаружении в ваших беседах с Caret.

```json
{
	"mcpRules": {
		"webInteraction": {
			"servers": ["firecrawl-mcp-server", "fetch-mcp"],
			"triggers": ["web", "scrape", "browse", "website"],
			"description": "Tools for web browsing and scraping"
		}
	}
}
```

### Структура конфигурации

1. **Категории**: Группируйте связанные серверы (например, "webInteraction", "mediaAndDesign")
2. **Servers**: Перечислите имена серверов в каждой категории
3. **Triggers**: Ключевые слова, которые активируют эти серверы
4. **Description**: Удобное для чтения объяснение категории

### Преимущества правил MCP

-   **Контекстный выбор инструментов**: Caret выбирает подходящие инструменты в зависимости от контекста разговора
-   **Снижение нагрузки**: Нет необходимости вручную указывать, какой инструмент использовать
-   **Организованные возможности**: Логически группируйте связанные инструменты и серверы
-   **Приоритизация**: Обрабатывайте неоднозначные случаи с явным порядком приоритетов

### Пример использования

Когда вы пишете "Can you scrape this website?", Caret обнаруживает "scrape" и "website" как триггеры, автоматически выбирая MCP-серверы, связанные с веб-контентом.

Для финансовых задач, таких как "What's Apple's stock price?", ключевые слова, такие как "stock" и "price", активируют серверы, связанные с финансами.

### Шаблон быстрого старта

```json
{
	"mcpRules": {
		"category1": {
			"servers": ["server-name-1", "server-name-2"],
			"triggers": ["keyword1", "keyword2", "phrase1", "phrase2"],
			"description": "Description of what these tools do"
		},
		"category2": {
			"servers": ["server-name-3"],
			"triggers": ["keyword3", "keyword4", "phrase3"],
			"description": "Description of what these tools do"
		},
		"category3": {
			"servers": ["server-name-4", "server-name-5"],
			"triggers": ["keyword5", "keyword6", "phrase4"],
			"description": "Description of what these tools do"
		}
	},
	"defaultBehavior": {
		"priorityOrder": ["category1", "category2", "category3"],
		"fallbackBehavior": "Ask user which tool would be most appropriate"
	}
}
```

Добавьте это в свой файл `.agents/context` или в свои пользовательские инструкции, чтобы сделать выбор MCP-сервера Caret более интуитивным и контекстно-зависимым.
```