---
title: "IAM 자격 증명"
sidebarTitle: "IAM 자격 증명"
description: "IAM 액세스 키/시크릿 키로 AWS Bedrock을 설정해 캐러티에서 사용하는 방법을 안내합니다. 기업 환경에 적합합니다."
---

### 개요

-   **AWS Bedrock:** AWS에서 제공하는 완전 관리형 서비스로, Anthropic Claude, Amazon Nova 등 주요 생성형 AI 모델에 접근할 수 있습니다.\
    [AWS Bedrock 자세히 보기](https://docs.aws.amazon.com/bedrock/latest/userguide/what-is-bedrock.html).
-   **캐러티:** AI 모델과 통합되는 VS Code 확장으로, 코드 생성/디버깅/분석을 지원합니다.
-   **기업 환경 중심:** IAM 역할, AWS SSO, AWS Organizations 등 이미 AWS 환경이 구축된 조직을 대상으로 안전하고 규정 준수된 사용을 전제로 합니다.

---

### 1단계: AWS 환경 준비

#### 1.1 IAM 역할/사용자 생성 또는 선택

1. **AWS 콘솔 로그인:**\
   [AWS 콘솔](https://aws.amazon.com/console/)
2. **IAM 접근:**
    - AWS 콘솔에서 **IAM(Identity and Access Management)**를 검색합니다.
    - 새 IAM 사용자를 만들거나, 조직의 AWS SSO를 사용해 Bedrock 전용 역할을 가정합니다.
    - [AWS IAM 사용자 가이드](https://docs.aws.amazon.com/IAM/latest/UserGuide/introduction.html)

#### 1.2 필요한 정책 연결

캐러티가 AWS Bedrock과 통신하려면 IAM 사용자/역할에 필요한 권한이 있어야 합니다. `AmazonBedrockLimitedAccess` 관리형 정책은 포괄적 접근을 제공하지만, 최소 권한 원칙을 적용하면 다음 권한만으로도 캐러티의 핵심 모델 호출 기능을 사용할 수 있습니다.

-   `bedrock:InvokeModel`
-   `bedrock:InvokeModelWithResponseStream`

위 권한으로 커스텀 IAM 정책을 만들고 IAM 사용자/역할에 연결하세요.

**옵션 1: 최소 권한 (운영/보안 권장)**

1.  AWS IAM 콘솔에서 새 정책을 만듭니다.
2.  JSON 편집기에 아래 정책을 입력합니다:
    ```json
    {
    	"Version": "2012-10-17",
    	"Statement": [
    		{
    			"Effect": "Allow",
    			"Action": ["bedrock:InvokeModel", "bedrock:InvokeModelWithResponseStream"],
    			"Resource": "*" // 보안 강화를 위해 가능하면 특정 모델 ARN으로 범위를 제한하세요.
    		}
    	]
    }
    ```
3.  정책 이름을 지정(예: `캐러티BedrockInvokeAccess`)하고 IAM 사용자/역할에 연결합니다.

**옵션 2: 관리형 정책 사용 (초기 설정 간소화)**

-   AWS 관리형 정책 **`AmazonBedrockLimitedAccess`**를 연결하면 모델 목록 조회, 프로비저닝 관리 등 Bedrock 전반 기능에 대한 폭넓은 권한을 부여받습니다. 초기 설정을 빠르게 진행하거나 추가 기능이 필요한 경우 유용합니다.\
    [AmazonBedrockLimitedAccess 정책 상세](https://docs.aws.amazon.com/bedrock/latest/userguide/security-iam.html)

**중요 고려사항**

-   **캐러티의 모델 목록:** 최소 권한(`bedrock:InvokeModel`, `bedrock:InvokeModelWithResponseStream`)만 있어도 캐러티 설정에 모델 ID를 직접 입력하면 사용할 수 있습니다. 캐러티가 동적으로 Bedrock 모델 목록을 불러오려면 `bedrock:ListFoundationModels` 같은 추가 권한이 필요할 수 있습니다.
-   **AWS Marketplace 구독:** Anthropic 같은 서드파티 모델은 AWS Marketplace 구독이 필요합니다. Bedrock 콘솔의 "Model access"에서 관리하며, 필요 시 `aws-marketplace:Subscribe` 권한이 요구될 수 있습니다.
-   **기업 팁:** 가능한 한 최소 권한을 적용하세요. 정책의 Resource ARN을 특정 모델/리전으로 제한하고, AWS Organizations의 [SCP(Service Control Policy)](https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps.html)를 활용해 거버넌스를 강화하세요.

---

### 2단계: 리전/모델 접근 확인

#### 2.1 리전 선택 및 확인

1. **리전 선택:**\
   AWS Bedrock은 여러 리전에서 제공됩니다(미국 동부, 유럽, 아시아 태평양 등). 지연 시간과 규정 준수 요구사항에 맞는 리전을 선택하세요.\
   [AWS 글로벌 인프라](https://aws.amazon.com/about-aws/global-infrastructure/regions_az/)
2. **모델 접근 확인:**
    - AWS Bedrock 콘솔에서 필요한 모델(예: Anthropic Claude, Amazon Nova)이 "Access granted"로 표시되어 있는지 확인합니다.
    - **참고:** 일부 고급 모델은 온디맨드가 아닌 경우 [Inference Profile](https://docs.aws.amazon.com/bedrock/latest/userguide/inference-profiles-support.html)이 필요할 수 있습니다.

#### 2.2 AWS Marketplace 구독 (필요 시)

1. **서드파티 모델 구독:**
    - AWS Bedrock 콘솔에서 모델 구독 섹션으로 이동합니다.
    - 서드파티 제공자 모델은 약관에 동의하고 구독해야 합니다.
    - [AWS Marketplace](https://aws.amazon.com/marketplace/)
2. **기업 팁:**
    - 구독은 중앙에서 관리되는 경우가 많습니다. 조직 내 클라우드 팀의 구독 프로세스를 확인하세요.

---

### 3단계: 캐러티 VS Code 확장 설정

#### 3.1 캐러티 설치 및 열기

1. **VS Code 설치:**\
   [VS Code 웹사이트](https://code.visualstudio.com/)에서 다운로드합니다.
2. **캐러티 확장 설치:**
    - VS Code를 엽니다.
    - 확장 마켓플레이스(`Ctrl+Shift+X` 또는 `Cmd+Shift+X`)로 이동합니다.
    - **캐러티**을 검색해 설치합니다.

#### 3.2 캐러티 설정

1. **캐러티 설정 열기:**
    - 설정 ⚙️에서 API Provider를 선택합니다.
2. **API Provider로 AWS Bedrock 선택:**
    - 드롭다운에서 **AWS Bedrock**을 선택합니다.
3. **AWS 자격 증명 입력:**
    - **Access Key**와 **Secret Key**를 입력합니다(또는 AWS SSO 임시 자격 증명 사용).
    - 올바른 **AWS 리전**을 지정합니다(예: `us-east-1` 또는 조직 승인 리전).
4. **모델 선택:**
    - 온디맨드 모델을 선택합니다(예: **anthropic.claude-3-5-sonnet-20241022-v2:0**).
5. **저장 및 테스트:**
    - **Done/Save**를 클릭해 설정을 저장합니다.
    - 간단한 프롬프트로 정상 동작을 확인합니다(예: "소수가 맞는지 판별하는 Python 함수를 생성해줘.").

---

### 4단계: 보안, 모니터링, 모범 사례

1. **접근 보안:**
    - 장기 IAM 자격 증명보다 AWS SSO/연동 역할 사용을 권장합니다.
    - [AWS IAM 모범 사례](https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html)
2. **네트워크 보안 강화:**
    - [AWS PrivateLink](https://docs.aws.amazon.com/vpc/latest/userguide/endpoint-services-overview.html)를 사용해 Bedrock에 안전하게 연결하는 방식을 고려하세요.
3. **모니터링 및 로그:**
    - AWS CloudTrail로 Bedrock API 호출 로그를 수집합니다.
    - CloudWatch로 호출 횟수, 지연, 토큰 사용량 등 지표를 모니터링합니다.
    - 이상 징후 알림을 설정하세요.
4. **오류 대응 및 비용 관리:**
    - 스로틀링 오류에 대비해 지수 백오프를 적용합니다.
    - AWS Cost Explorer와 비용 알림을 사용해 지출을 추적합니다.\
      [AWS 비용 관리](https://docs.aws.amazon.com/cost-management/latest/userguide/what-is-aws-cost-management.html)
5. **정기 점검 및 컴플라이언스:**
    - IAM 역할과 CloudTrail 로그를 정기적으로 검토합니다.
    - 조직의 데이터 프라이버시/거버넌스 정책을 준수합니다.

---

### 마무리

위 단계를 따르면 기업 환경에서 AWS Bedrock을 캐러티 VS Code 확장에 안전하게 연결할 수 있습니다.

1. **AWS 환경 준비:** IAM 역할/사용자를 구성하고 `AmazonBedrockLimitedAccess` 또는 최소 권한 정책을 연결합니다.
2. **리전/모델 접근 확인:** 필요한 리전과 모델 접근 권한을 확인하고, Marketplace 구독을 완료합니다.
3. **캐러티 설정:** VS Code에서 캐러티를 설치하고 AWS 자격 증명을 설정합니다.
4. **보안/모니터링:** IAM 보안, 네트워크 보호, 로그/비용 관리를 적용합니다.

추가 정보는 [AWS Bedrock 문서](https://docs.aws.amazon.com/bedrock/latest/userguide/what-is-bedrock.html)를 참고하고, 내부 클라우드 팀과 정책을 맞추세요.

---

_이 문서는 AWS Bedrock과 캐러티의 변화에 맞춰 업데이트됩니다. 최신 정책과 내부 표준을 우선으로 삼으세요._
