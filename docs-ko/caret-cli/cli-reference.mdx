---
title: "CLI 레퍼런스"
description: "설정, 인스턴스 관리, 작업 명령까지 Caret CLI의 전체 명령 레퍼런스"
---

Caret CLI 전체 명령 레퍼런스입니다. 모든 명령, 옵션, 설정에 대한 상세 문서를 확인할 때 사용하세요.

터미널에서 빠르게 도움말을 보려면:

```bash
caret --help          # 전체 명령 보기
caret task --help     # 작업 관련 명령 보기
man caret            # 전체 매뉴얼 페이지
```

## 매뉴얼 페이지

Caret CLI의 전체 매뉴얼 페이지:

```
CARET(1)                         User Commands                        CARET(1)

NAME
       caret - orchestrate and interact with Caret AI coding agents

SYNOPSIS
       caret [prompt] [options]

       caret command [subcommand] [options] [arguments]

DESCRIPTION
       Try: cat README.md | caret "Summarize this for me:"

       caret is a command-line interface for orchestrating multiple Caret AI
       coding agents.  Caret is an autonomous AI agent who can read, write,
       and execute code across your projects.  He operates through a
       client-server architecture where Caret Core runs as a standalone
       service, and the CLI acts as a scriptable interface for managing tasks,
       instances, and agent interactions.

       The CLI is designed for both interactive use and automation, making it
       ideal for CI/CD pipelines, parallel task execution, and terminal-based
       workflows.  Multiple frontends (CLI, VSCode, JetBrains) can attach to
       the same Caret Core instance, enabling seamless task handoff between
       environments.

MODES OF OPERATION
       Instant Task Mode
              The simplest invocation: caret "prompt here" immediately spawns
              an instance, creates a task, and enters chat mode.  This is
              equivalent to running caret instance new && caret task new &&
              caret task chat in sequence.

       Subcommand Mode
              Advanced usage with explicit control: caret <command>
              [subcommand] [options] provides fine-grained control over
              instances, tasks, authentication, and configuration.

AGENT BEHAVIOR
       Caret operates in two primary modes:

       ACT MODE
              Caret actively uses tools to accomplish tasks.  He can read
              files, write code, execute commands, use a headless browser, and
              more.  This is the default mode for task execution.

       PLAN MODE
              Caret gathers information and creates a detailed plan before
              implementation.  He explores the codebase, asks clarifying
              questions, and presents a strategy for user approval before
              switching to ACT MODE.

INSTANT TASK OPTIONS
       When using the instant task syntax caret "prompt" the following options
       are available:

       -o, --oneshot
              Full autonomous mode.  Caret completes the task and stops
              following after completion.  Example: caret -o "what's 6 + 8?"

       -s, --setting setting value
              Override a setting for this task

       -y, --no-interactive, --yolo
              Enable fully autonomous mode.  Disables all interactivity:

              • ask_followup_question tool is disabled

              • attempt_completion happens automatically

              • execute_command runs in non-blocking mode with timeout

              • PLAN MODE automatically switches to ACT MODE

       -m, --mode mode
              Starting mode.  Options: act (default), plan

       -w, --workspace path
              Additional workspace paths.  Can be specified multiple times to
              include multiple directories.  The current working directory is
              always included as the first workspace.  Example: caret -w
              /path/to/other/project "refactor shared code"

GLOBAL OPTIONS
       These options apply to all subcommands:

       -F, --output-format format
              Output format.  Options: rich (default), json, plain

       -h, --help
              Display help information for the command.

       -v, --verbose
              Enable verbose output for debugging.

COMMANDS
   Authentication
       caret auth [provider] [key]

       caret a [provider] [key]
              Configure authentication for AI model providers.  Launches an
              interactive wizard if no arguments provided.  If provider is
              specified without a key, prompts for the key or launches the
              appropriate OAuth flow.

   Instance Management
       Caret Core instances are independent agent processes that can run in
       the background.  Multiple instances can run simultaneously, enabling
       parallel task execution.

       caret instance

       caret i
              Display instance management help.

       caret instance new [-d|--default]

       caret i n [-d|--default]
              Spawn a new Caret Core instance.  Use --default to set it as
              the default instance for subsequent commands.

       caret instance list

       caret i l
              List all running Caret Core instances with their addresses and
              status.

       caret instance default address

       caret i d address
              Set the default instance to avoid specifying --address in task
              commands.

       caret instance kill address [-a|--all]

       caret i k address [-a|--all]
              Terminate a Caret Core instance.  Use --all to kill all running
              instances.

   Task Management
       Tasks represent individual work items that Caret executes.  Tasks
       maintain conversation history, checkpoints, and settings.

       caret task [-a|--address ADDR]

       caret t [-a|--address ADDR]
              Display task management help.  The --address flag specifies
              which Caret Core instance to use (e.g., localhost:50052).

       caret task new prompt [options]

       caret t n prompt [options]
              Create a new task in the default or specified instance.
              Options:

              -s, --setting setting value
                     Set task-specific settings

              -y, --no-interactive, --yolo
                     Enable autonomous mode

              -m, --mode mode
                     Starting mode (act or plan)

       caret task open task-id [options]

       caret t o task-id [options]
              Resume a previous task from history.  Accepts the same options
              as task new.

       caret task list

       caret t l
              List all tasks in history with their id and snippet

       caret task chat

       caret t c
              Enter interactive chat mode for the current task.  Allows
              back-and-forth conversation with Caret.

       caret task send [message] [options]

       caret t s [message] [options]
              Send a message to Caret.  If no message is provided, reads from
              stdin.  Options:

              -a, --approve
                     Approve Caret's proposed action

              -d, --deny
                     Deny Caret's proposed action

              -f, --file FILE
                     Attach a file to the message

              -y, --no-interactive, --yolo
                     Enable autonomous mode

              -m, --mode mode
                     Switch mode (act or plan)

       caret task view [-f|--follow] [-c|--follow-complete]

       caret t v [-f|--follow] [-c|--follow-complete]
              Display the current conversation.  Use --follow to stream
              updates in real-time, or --follow-complete to follow until task
              completion.

       caret task restore checkpoint

       caret t r checkpoint
              Restore the task to a previous checkpoint state.

       caret task pause

       caret t p
              Pause task execution.

   Configuration
       Configuration can be set globally.  Override these global settings for
       a task using the --setting flag

       caret config

       caret c

       caret config set key value

       caret c s key value
              Set a configuration variable.

       caret config get key

       caret c g key
              Read a configuration variable.

       caret config list

       caret c l
              List all configuration variables and their values.

   Context Window Configuration
       For local model providers, you can configure the context window size:

       Ollama
              caret config s ollama-api-options-ctx-num=32768

       LM Studio
              caret config s lm-studio-max-tokens=32768

       For other providers (Anthropic, OpenRouter, etc.), the context window
       is defined per model in the model metadata and is not user-settable.
       Caret uses each model's built-in context limits automatically.

TASK SETTINGS
       Task settings are persisted in the ~/.caret/x/tasks directory.  When
       resuming a task with caret task open, task settings are automatically
       restored.

       Common settings include:

       yolo   Enable autonomous mode (true/false)

       mode   Starting mode (act/plan)

       hooks_enabled
              Enable or disable hooks for the task (true/false)

HOOKS INTEGRATION
       Hooks let you inject custom logic into Caret's workflow at key moments.
       They can validate operations before they execute, monitor tool usage,
       and shape AI decisions. This allows you to integrate hooks into
       automated workflows, CI/CD pipelines, and headless task execution.

       Enable hooks for a task:

              caret "prompt" -s hooks_enabled=true

       Configure hooks globally:

              caret config set hooks-enabled=true
              caret config get hooks-enabled

       Note: Hooks in the CLI are only supported on macOS and Linux.

       For complete hooks documentation, see:
       <https://docs.caret.team/features/hooks/index>

NOTES & EXAMPLES
       The caret task send and caret task new commands support reading from
       stdin, enabling powerful pipeline compositions:

              cat requirements.txt | caret task send
              echo "Refactor this code" | caret -y

   Instance Management
       Manage multiple Caret instances:

              # Start a new instance and make it default
              caret instance new --default

              # List all running instances
              caret instance list

              # Kill a specific instance
              caret instance kill localhost:50052

              # Kill all CLI instances
              caret instance kill --all-cli

   Task History
       Work with task history:

              # List previous tasks
              caret task list

              # Resume a previous task
              caret task open 1760501486669

              # View conversation history
              caret task view

              # Start interactive chat with this task
              caret task chat

ARCHITECTURE
       Caret operates on a three-layer architecture:

       Presentation Layer
              User interfaces (CLI, VSCode, JetBrains) that connect to Caret
              Core via gRPC

       Caret Core
              The autonomous agent service handling task management, AI model
              integration, state management, tool orchestration, and real-time
              streaming updates

       Host Provider Layer
              Environment-specific integrations (VSCode APIs, JetBrains APIs,
              shell APIs) that Caret Core uses to interact with the host
              system

BUGS
       Report bugs at: <https://github.com/aicoding-caret/caret/issues>

       For real-time help, join the Discord community at:
       <https://discord.gg/caret>

SEE ALSO
       Full documentation: <https://docs.caret.team>

AUTHORS
       Caret is developed by the Caret Bot Inc. and the open source community.

COPYRIGHT
       Copyright © 2025 Caret Bot Inc. Licensed under the Apache License 2.0.
```

## JSON 출력 (-F json)

`-F json`(또는 `--output-format json`)으로 실행하면 Caret이 각 메시지를 JSON으로 출력합니다.

### CaretMessage 스키마

| 필드 | 타입 | 필수 | 설명 |
| --- | --- | --- | --- |
| `type` | `"ask"` 또는 `"say"` | 예 | 최상위 메시지 유형입니다. |
| `text` | `string` | 예 | 사람이 읽을 수 있는 메시지 내용입니다. |
| `ts` | `number` | 예 | 밀리초 단위 Unix epoch 타임스탬프입니다. |
| `reasoning` | `string` | 아니오 | 비어 있으면 생략됩니다. |
| `say` | `string` | 아니오 | 비어 있으면 생략됩니다. `type`이 `"say"`일 때 포함됩니다. |
| `ask` | `string` | 아니오 | 비어 있으면 생략됩니다. `type`이 `"ask"`일 때 포함됩니다. |
| `partial` | `boolean` | 아니오 | false면 생략됩니다. 스트리밍 업데이트는 `true`로 표시됩니다. |
| `images` | `string[]` | 아니오 | 비어 있으면 생략됩니다. 메시지에 포함된 이미지 URI입니다. |
| `files` | `string[]` | 아니오 | 비어 있으면 생략됩니다. 메시지에 첨부된 파일 경로입니다. |
| `lastCheckpointHash` | `string` | 아니오 | 비어 있으면 생략됩니다. Git 체크포인트 해시입니다. |
| `isCheckpointCheckedOut` | `boolean` | 아니오 | false면 생략됩니다. 체크포인트를 체크아웃한 상태면 `true`입니다. |
| `isOperationOutsideWorkspace` | `boolean` | 아니오 | false면 생략됩니다. 워크스페이스 밖에서 작업이 발생하면 `true`입니다. |

<Note>
대부분의 필드는 비어 있으면 생략됩니다. 파싱할 때는 누락된 필드를 “빈 문자열”이 아니라 “존재하지 않음”으로 처리하세요.
</Note>

### 예시

```json
{
  "type": "say",
  "text": "Caret is about to run a command.",
  "ts": 1760501486669,
  "say": "command",
  "partial": false
}
```

### 셸 자동완성

여러 셸용 자동완성 스크립트를 생성할 수 있습니다:

#### Bash

```bash
# Bash 자동완성 생성
caret completion bash > /etc/bash_completion.d/caret

# 사용자 레벨 설치
caret completion bash > ~/.local/share/bash-completion/completions/caret
```

#### Zsh

```bash
# Zsh 자동완성 생성
caret completion zsh > "${fpath[1]}/_caret"

# 또는 .zshrc에 추가
echo 'source <(caret completion zsh)' >> ~/.zshrc
```

#### Fish

```bash
# Fish 자동완성 생성
caret completion fish > ~/.config/fish/completions/caret.fish
```

#### PowerShell

```powershell
# PowerShell 자동완성 생성
caret completion powershell > caret.ps1

# PowerShell 프로필에 추가
Add-Content $PROFILE "caret completion powershell | Out-String | Invoke-Expression"
```

### 버전 명령

```bash
# 버전 정보 확인
caret version
```

### 환경 변수

#### CLINE_DIR

Caret 기본 디렉터리 위치를 재정의합니다:

```bash
# 기본 Caret 디렉터리 변경
export CLINE_DIR=/custom/path

# 기본값: ~/.caret
```

이 디렉터리는 아래 용도로 사용됩니다:
- 인스턴스 레지스트리 데이터베이스
- 설정 파일
- 작업 히스토리
- 체크포인트
